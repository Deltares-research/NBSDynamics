from typing import Optional
import numpy as np
from src.core.base_model import ExtraModel
from src.core.vegetation.veg_model import Vegetation


class Veg_Growth(ExtraModel):
    """ Vegetation growth by changing the veg_frac_age matrix"""

    growth_days_ets: Optional[float] = None

    def update(self, veg: Vegetation, ets):
        """update vegetation depending on growth days in certain ets"""
        self.growth_days_ets = veg.growth_days[ets]
        n, m = veg.veg_age_frac.shape
        new = np.zeros((n, self.growth_days_ets))
        veg.veg_age_frac = np.hstack((new, veg.veg_age_frac))

        veg.update_vegetation_characteristics(veg.veg_age_frac)
